!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["well-bricks"]={})}(this,(function(t){"use strict";var e="global",r=function(t){return"function"==typeof t},n=function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},o=function(t){return"_"+t+"_"},i=function(t,e){return e.reduce((function(t,e){return r(e)?e(t):t}),t)},s=function(t){return n(t)||Array.isArray(t)?(Object.entries(t).forEach((function(e){var r=e[0],n=e[1];try{var o=JSON.parse(n);Reflect.set(t,r,s(o))}catch(t){}})),t):t},c=function(){function t(t){if(this.onSet=[],this.onGet=[],!["session","local"].includes(t))throw new TypeError("can't init store with type: "+t);this.instance="session"===t?sessionStorage:localStorage}return t.prototype.set=function(t,r,n,s){void 0===n&&(n=99999999),void 0===s&&(s=e);var c=i(r,this.onSet);try{var u=this.getModule(s);return Reflect.set(u,t,{expire:1e3*n,val:c,time:Date.now()}),this.instance.setItem(o(s),JSON.stringify(u)),!0}catch(e){return console.error("failed to set storage: { key:"+t+",val:"+r+" }"),!1}},t.prototype.get=function(t,r){void 0===r&&(r=e);var n=this.getModule(r);try{var o=Reflect.get(n,t);if(!o)return;var s=o.time,c=o.expire,u=o.val;return+s+ +c<=Date.now()?void this.remove(t,r):i(u,this.onGet)}catch(e){return void console.error("failed to getItem with key : "+t)}},t.prototype.remove=function(t,r){void 0===r&&(r=e);try{var n=this.getModule(r);return Reflect.deleteProperty(n,t),this.instance.setItem(o(r),JSON.stringify(n)),!0}catch(t){return!1}},t.prototype.getModule=function(t){var e;try{return JSON.parse(null!==(e=this.instance.getItem(o(t)))&&void 0!==e?e:"{}")}catch(t){return{}}},t.prototype.use=function(t){if(n(t)){var e=t.onSet,o=t.onGet;r(e)&&this.onSet.push(e),r(o)&&this.onGet.push(o)}},t}(),u={onSet:function(t){if(n(t)){var e=(o=t,JSON.parse(JSON.stringify(o))),r=function(t){Object.entries(t).forEach((function(e){var o=e[0],i=e[1];null==i?Reflect.deleteProperty(t,o):n(i)&&r(i)}))};return r(e),e}var o;return t},onGet:s};t.default=c,t.storeFilter=u,Object.defineProperty(t,"__esModule",{value:!0})}));
