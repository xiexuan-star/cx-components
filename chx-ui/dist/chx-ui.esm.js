import{defineComponent as t,computed as e,createVNode as n,createCommentVNode as r,ref as o,watch as i,nextTick as l,openBlock as s,createBlock as a,Fragment as u,resolveComponent as c}from"vue";var f=t({name:"CxBtn",props:{size:{type:String,default:"medium"},level:{type:[String,Number],default:"2"},type:{type:String,default:"primary"},content:{type:String,default:""},icon:{type:String,default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup:function(t,o){var i=o.slots,l=e((function(){var e=["cx-btn_wrapper"];return t.disabled&&e.push("cx-btn_disabled"),e.push("cx-btn_"+t.size),e.push("cx-btn_level_"+t.level),e.push("cx-btn_"+t.type),t.loading&&e.push("cx-btn_loading"),e}));return function(e,o){return n("button",{type:"button",class:l.value,onClick:o[0]?o[0]:o[0]=function(e){if(e.preventDefault(),t.disabled)return!1}},[t.loading?o[1]?o[1]:o[1]=n("i",{class:"el-icon-loading cx_mr_5"}):r("v-if",!0),t.icon?(s=t.icon,n("i",{class:"iconfont icon-"+s},null,2)):r("v-if",!0),(i.default?i.default({}):t.content)?n("span",{class:{cx_ml_5:!!t.icon}},[i.default?i.default({}):t.content]):r("v-if_content",!0),t.disabled?o[2]?o[2]:o[2]=n("i",{onClick:function(t){return t.stopPropagation()},class:"cx_mask"}):r("v-if",!0)],514);var s}}});f.install=function(t){t.component(f.name,f)};var p=f,d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function v(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function m(t,e,n,r){return new(n||(n=Promise))((function(o,i){function l(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,s)}a((r=r.apply(t,e||[])).next())}))}function y(t,e){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}var _=Object.prototype.toString;function x(t,e){return _.call(t)==="[object "+e+"]"}var R=function(t){return null!==t&&x(t,"Object")};var w=function(t){return"function"==typeof t},C=t({name:"CxTab",props:{level:{type:[String,Number],default:"1"},modelValue:{type:[Number,String],default:0},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},badgeObj:{type:Object,default:function(){return{}}}},emits:["update:modelValue","change"],setup:function(t,s){var a=this,u=s.emit,c=s.slots,f=e((function(){return t.options.filter((function(t){return R(t)?!t.hide:t})).map((function(t){return R(t)?t:{id:t,name:t}}))})),p=function(){return f.value.map((function(e){var o,i,l,s=["cx-tab_item","clickable","cx_flex_center"];t.modelValue===e.id&&s.push("cx-tab_item_active");var a=null!==(i=t.badgeObj[null!==(o=e.badgeKey)&&void 0!==o?o:""])&&void 0!==i?i:0,c=null!==(l=e.unit)&&void 0!==l?l:"";return a>=100&&(a="99+"),n("div",{onClick:function(){var n;(n=e.id)!==t.modelValue&&(t.disabled||(u("update:modelValue",n),u("change",n)))},class:s},[e.name,a?n("div",{class:"cx-tab_badge_"+t.level},""+a+c,3):r("v-if_badge",!0)],514)}))},d=o(null),v=function(t){return n("div",{onClick:function(){if(d.value)var e=300,n=e/10,r=setInterval((function(){if(d.value){var o=d.value.scrollLeft+("left"===t?-n:n);d.value.scrollTo(o,0);var i="left"===t?o<=0:o>=d.value.scrollWidth-d.value.clientWidth;0===e||i?clearInterval(r):e<=3?e=0:n=(e-=e/10)/10}}),10)},class:["cx-tab_"+t+"_arrow","iconfont","cx_flex_center","left"===t?"icon-xiangzuo":"icon-xiangyou"]},null,514)},h=function(){if(d.value){var t=d.value.querySelector(".cx-tabs");if(t){var e=d.value.clientWidth;return t.clientWidth>e}}},g=o(h());return i((function(){return f.value}),(function(){return m(a,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,l()];case 1:return t.sent(),g.value=h(),[2]}}))}))}),{deep:!0,immediate:!0}),function(e,o){var i=["cx-tab_scroll_wrapper","cx_flex_center","cx_justify_between","level-"+t.level+"_wrapper"];return g.value&&i.push("cx_plr_20"),t.disabled&&i.push("cx-tab_disabled"),n("div",{class:i},[n("div",{class:"cx-tab_wrapper",ref:d},[n("div",{class:"cx-tabs"},p())],512),g.value?o[0]||(o[0]=v("left")):r("v-if_left_arrow",!0),g.value?o[1]||(o[1]=v("right")):r("v-if_right_arrow",!0),n("div",{class:"cx-tab_extension"},[c.ext&&c.ext()])],2)}}});C.install=function(t){t.component(C.name,C)};var j=C;function O(t,e){return R(t)?Object.keys(t).reduce((function(n,r){return e.includes(r)||Reflect.set(n,r,t[r]),n}),{}):t}var A,S=function(t,e,o){return s(),a(u,null,[o?w(o)?o(O(t,["__closable","__emit","__prop"])):n(o,O(t,["__closable","__emit","__prop"]),e,16):r("v-if_component",!0)])},k=function(){function t(){this.renderComp=S}return t.prototype.renderControl=function(t,e,o){return n("div",{style:{position:"relative"}},[S(t,e,o),t.__closable?n("i",{style:{position:"absolute",right:"-3px",top:"-3px"},class:"iconfont icon-shanchu",onClick:function(){w(t.__emit)&&t.__emit("close",t.__prop)}}):r("v-if_closable",!0)])},t}(),F=(A=null,function(){return A||(A=new k),A}),V=function(){function t(){this.name="",this.slots={},this.attrs={}}return t.prototype.init=function(){return this.propAdaptor(),this},t.prototype.propAdaptor=function(){throw new Error("请重写propAdaptor方法")},t.prototype.addSlots=function(t){return"function"==typeof t?Reflect.set(this.slots,"default",t):"object"==typeof t&&Object.assign(this.slots,t),this},t.prototype.renderVNode=function(t){return F().renderComp(this.attrs,this.slots,t)},t.prototype.renderControl=function(t){return F().renderControl(this.attrs,this.slots,t)},t.prototype.render=function(){throw new Error("请重写render方法")},t}(),B=function(t){function e(e){return t.call(this,"CxFormError: "+e)||this}return v(e,t),e}(Error),E=new Map,N=function(){var t,e;return{register:function(n){var r=n.props,o=n.ref;t=o,e=r},getFormRef:function(){return t},setFormConfig:function(t,n,r){if(!e)throw new B("can't set property before regist");var o=null==e?void 0:e.items.find((function(e){return e.prop===t}));return o?Reflect.has(o,n)?Reflect.set(o,n,r):void b(E.keys()).find((function(t){var e=Reflect.get(o,t);if(R(e)){if("options"===n){if(!Array.isArray(r))throw new B("can't set options with non-array");var i=Reflect.get(e,"options");Array.isArray(i)?(i.splice(0),i.push.apply(i,b(r))):Reflect.set(e,"options",r),Reflect.set(e,"key",Date.now())}else Reflect.set(e,n,r);return!0}})):console.warn("[cxForm warn]: prop "+t+" isn't exist on this form's configList ")},registerRenderer:function(t){var e=t.comp,n=t.type,r=t.adaptor;E.set(n,{comp:e,adaptor:r})},getRenderer:function(t){return E.get(t)},getRendererKeys:function(){return E.keys()}}},W=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.name="CxFormControl",i.parse=null,i.attrs={},i.type="",i.form=e,i.emit=o,i.config=n,i.rootConfig=r,i.prop=n.prop,i.init(),i}return v(e,t),e.prototype.init=function(){return this.propAdaptor().bindModel(),this},e.prototype.addSlots=function(t){var e,n,r,o=this;if(!R(t))return this;R(null===(e=this.config)||void 0===e?void 0:e.slot)&&Object.entries(this.config.slot).forEach((function(e){var n=g(e,2),r=n[0],i=n[1];Reflect.set(o.slots,r,Reflect.get(t,i))}));var i=null===(r=null===(n=this.config)||void 0===n?void 0:n.custom)||void 0===r?void 0:r.slot;return i&&Reflect.set(this.slots,i,Reflect.get(t,i)),this},e.prototype.bindModel=function(){var t=this;return this.prop&&(Reflect.set(this.attrs,"modelValue",this.form[this.prop]),Reflect.set(this.attrs,"onUpdate:modelValue",(function(e){Array.isArray(e)?e=e.map((function(e){return t.parse?t.parse(e):e})):e&&(e=t.parse?t.parse(e):e),Reflect.set(t.form,t.prop,e)}))),this},e.prototype.propAdaptor=function(){var t,e,n,r,o=this,i=N(),l=i.getRendererKeys,s=i.getRenderer;b(l()).find((function(t){var e;if(R(Reflect.get(o.config,t))){var n=(null!==(e=s(t))&&void 0!==e?e:{}).adaptor;return o.type=t,w(n)?n.apply(o):Object.assign(o.attrs,Reflect.get(o.config,t)),!0}}));var a=Reflect.get(null!==(t=this.config)&&void 0!==t?t:{},"placeholder");return a&&Reflect.set(this.attrs,"placeholder",a),Reflect.set(this.attrs,"onChange",(function(t){var e,n,r={prop:o.prop,val:t,form:o.form};Array.isArray(o.attrs.options)&&Reflect.set(r,"option",o.attrs.options.find((function(e){return e.id===t}))),w(o.emit)&&o.emit("change",r),w(null===(e=o.config)||void 0===e?void 0:e.onChange)&&(null===(n=o.config)||void 0===n||n.onChange(r))})),!R(null===(e=this.attrs)||void 0===e?void 0:e.style)&&Reflect.set(this.attrs,"style",{}),this.config.width&&R(null===(n=this.attrs)||void 0===n?void 0:n.style)&&Reflect.set(this.attrs.style,"width",this.config.width+"px"),Reflect.set(this.attrs,"__closable",(null===(r=this.rootConfig)||void 0===r?void 0:r.closable)||this.config.closable),Reflect.set(this.attrs,"__emit",this.emit),Reflect.set(this.attrs,"__prop",this.prop),this},e.prototype.render=function(){var t,e,n,r,o;if("custom"===this.type)o=Reflect.get(this.slots,null!==(n=null===(e=null===(t=this.config)||void 0===t?void 0:t.custom)||void 0===e?void 0:e.slot)&&void 0!==n?n:"");else{var i=null===(r=N().getRenderer(this.type))||void 0===r?void 0:r.comp;o=w(i)?i():i}return this.renderControl(o)},e}(V),P=function(){return{size:"small",labelSuffix:":",labelPosition:"left",onSubmit:function(t){return t.preventDefault()}}},z=function(t){function e(e){var n=t.call(this)||this;return n.name="CxForm",n.attrs={},n.ref=o(null),n.config=e,n.init(),n}return v(e,t),e.prototype.getFormRef=function(){return this.ref},e.prototype.propAdaptor=function(){var t,e,n,r;return Object.assign(this.attrs,P(),O(this.config,["items","formAttrs"])),this.config.formAttrs&&Object.assign(this.attrs,O(this.config.formAttrs,["form","inline","disabled","closable","items","class"])),Reflect.set(this.attrs,"ref",this.ref),Reflect.set(this.attrs,"model",null!==(e=null===(t=this.config)||void 0===t?void 0:t.form)&&void 0!==e?e:{}),Reflect.set(this.attrs,"rules",null===(r=null===(n=this.config)||void 0===n?void 0:n.items)||void 0===r?void 0:r.reduce((function(t,e){return e.rule&&Reflect.set(t,e.prop,e.rule),t}),{})),this},e.prototype.render=function(){var t,e,n=null!==(e=null===(t=N().getRenderer("form"))||void 0===t?void 0:t.comp)&&void 0!==e?e:c("ElForm");return this.renderVNode(n)},e}(V),I=function(t){function e(e){var n=t.call(this)||this;return n.name="CxFormItem",n.attrs={},n.config=e,n.init(),n}return v(e,t),e.prototype.addSlots=function(t){var e=this;if(R(t)){var n={default:t.default};this.config.labelSlot&&Reflect.set(n,"label",(function(){var n;return null===(n=t[e.config.labelSlot])||void 0===n?void 0:n.call(t,h({},e.config))})),Object.assign(this.slots,n)}return this},e.prototype.propAdaptor=function(){var t,e,n,r,o,i,l,s,a,u,c;return x(null===(t=this.config)||void 0===t?void 0:t.spacing,"Number")&&Reflect.set(this.attrs,"style",{paddingRight:(null===(e=this.config)||void 0===e?void 0:e.spacing)+"px"}),Reflect.set(this.attrs,"key",null!==(r=null===(n=this.config)||void 0===n?void 0:n.prop)&&void 0!==r?r:""),Object.assign(this.attrs,null!==(i=null===(o=this.config)||void 0===o?void 0:o.itemAttrs)&&void 0!==i?i:{}),(null===(l=this.config)||void 0===l?void 0:l.labelWidth)&&Reflect.set(this.attrs,"labelWidth",this.config.labelWidth+"px"),Reflect.set(this.attrs,"label",null!==(a=null===(s=this.config)||void 0===s?void 0:s.label)&&void 0!==a?a:""),Reflect.set(this.attrs,"prop",null!==(c=null===(u=this.config)||void 0===u?void 0:u.prop)&&void 0!==c?c:""),this},e.prototype.render=function(){var t,e,n=null!==(e=null===(t=N().getRenderer("formItem"))||void 0===t?void 0:t.comp)&&void 0!==e?e:c("ElFormItem");return this.renderVNode(n)},e}(V),T=t({props:{form:{type:Object,default:function(){return{}}},inline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},class:{type:[Array,Object,String],default:function(){return[]}},formAttrs:{type:Object}},name:"CxForm",emits:["change","register","close"],setup:function(t,e){var r=e.slots,o=e.emit;function i(e){return new W(t.form,e,t,o).addSlots(r).render()}function l(){var e=new z(t).addSlots((function(){var e;return null===(e=t.items)||void 0===e?void 0:e.reduce((function(t,e){return!e.hide&&t.push(function(t){var e=h(h({},r),{default:function(){return[i(t)]}});return new I(t).addSlots(e).render()}(e)),t}),[])}));return o("register",{props:t,ref:e.getFormRef()}),e.render()}return(0,e.expose)({trigger:function(e){o("change",{prop:e,val:t.form[e],form:t.form})}}),function(){return n("div",{name:"cx-form"},[l()])}}});T.install=function(t){t.component(T.name,T)};var D=T,K=Object.freeze({__proto__:null,CxBtn:p,CxTab:j,CxForm:D}),M={install:function(t){Object.values(K).forEach((function(e){t.use(e)}))}};export default M;export{p as CxBtn,D as CxForm,j as CxTab,F as cxFormRender,N as useCxForm};
